Cloned from https://github.com/ptal/expected, revision 5304a6d57cfe2eea824875cdca4a8005de5acd15

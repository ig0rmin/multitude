<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>v8: v8::Persistent&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacev8.html">v8</a>::<a class="el" href="classv8_1_1_persistent.html">Persistent</a>
  </div>
</div>
<div class="contents">
<h1>v8::Persistent&lt; T &gt; Class Template Reference</h1><!-- doxytag: class="v8::Persistent" --><!-- doxytag: inherits="Handle&lt; T &gt;" --><code>#include &lt;<a class="el" href="v8_8h-source.html">v8.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for v8::Persistent&lt; T &gt;:</div>
<div class="dynsection">

<p><center><img src="classv8_1_1_persistent.png" usemap="#v8::Persistent< T >_map" border="0" alt=""></center>
<map name="v8::Persistent< T >_map">
<area href="classv8_1_1_handle.html" alt="v8::Handle< T >" shape="rect" coords="0,0,118,24">
</map>
</div>

<p>
<a href="classv8_1_1_persistent-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#ff7516636baaf209885220f7cff34463">Persistent</a> ()</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#479b4194257dc85bc3eb82dd11ab5a35">Persistent</a> (<a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; S &gt; that)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="94c1d8f1c8da262966b900af29fcf84a"></a><!-- doxytag: member="v8::Persistent::Persistent" ref="94c1d8f1c8da262966b900af29fcf84a" args="(S *that)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>Persistent</b> (S *that)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#6f3b0074b3b88e32d7a85637d17075ed">Persistent</a> (<a class="el" href="classv8_1_1_handle.html">Handle</a>&lt; S &gt; that)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="d9244d177245fde292b04ed23fe7d49e"></a><!-- doxytag: member="v8::Persistent::As" ref="d9244d177245fde292b04ed23fe7d49e" args="()" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top"><a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; S &gt;&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>As</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#33e53191844272ba0f2da4f55fc12297">Dispose</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#b04609812113450bece2640ad0b27658">MakeWeak</a> (void *parameters, <a class="el" href="namespacev8.html#9065f8994925d59dc82ae88667d93904">WeakReferenceCallback</a> callback)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#30806c1125371c269a02ec03d47c69ab">ClearWeak</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#1f60b982c5e734df7e4fe22ccd5b62cf">IsNearDeath</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#a636a55b81eee222f86866dd5ae8c06f">IsWeak</a> () const </td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="1b721f001331a0664c6781951de5d209"></a><!-- doxytag: member="v8::Persistent::Cast" ref="1b721f001331a0664c6781951de5d209" args="(Persistent&lt; S &gt; that)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">static <a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; T &gt;&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>Cast</b> (<a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; S &gt; that)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; T &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1_persistent.html#d309269ccaeffa6dec338093752ca539">New</a> (<a class="el" href="classv8_1_1_handle.html">Handle</a>&lt; T &gt; that)</td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c7b520085953e146d849e05253267f72"></a><!-- doxytag: member="v8::Persistent::ImplementationUtilities" ref="c7b520085953e146d849e05253267f72" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><b>ImplementationUtilities</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4d28646409234f556983be8a96c06424"></a><!-- doxytag: member="v8::Persistent::ObjectTemplate" ref="4d28646409234f556983be8a96c06424" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><b>ObjectTemplate</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T&gt;<br>
 class v8::Persistent&lt; T &gt;</h3>

An object reference that is independent of any handle scope. Where a <a class="el" href="classv8_1_1_local.html">Local</a> handle only lives as long as the <a class="el" href="classv8_1_1_handle_scope.html">HandleScope</a> in which it was allocated, a <a class="el" href="classv8_1_1_persistent.html">Persistent</a> handle remains valid until it is explicitly disposed.<p>
A persistent handle contains a reference to a storage cell within the <a class="el" href="namespacev8.html">v8</a> engine which holds an object value and which is updated by the garbage collector whenever the object is moved. A new storage cell can be created using <a class="el" href="classv8_1_1_persistent.html#d309269ccaeffa6dec338093752ca539">Persistent::New</a> and existing handles can be disposed using <a class="el" href="classv8_1_1_persistent.html#33e53191844272ba0f2da4f55fc12297">Persistent::Dispose</a>. Since persistent handles are passed by value you may have many persistent handle objects that point to the same storage cell. For instance, if you pass a persistent handle as an argument to a function you will not get two different storage cells but rather two references to the same storage cell. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ff7516636baaf209885220f7cff34463"></a><!-- doxytag: member="v8::Persistent::Persistent" ref="ff7516636baaf209885220f7cff34463" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::<a class="el" href="classv8_1_1_persistent.html">Persistent</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates an empty persistent handle that doesn't point to any storage cell. 
</div>
</div><p>
<a class="anchor" name="479b4194257dc85bc3eb82dd11ab5a35"></a><!-- doxytag: member="v8::Persistent::Persistent" ref="479b4194257dc85bc3eb82dd11ab5a35" args="(Persistent&lt; S &gt; that)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
<div class="memtemplate">
template&lt;class S &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::<a class="el" href="classv8_1_1_persistent.html">Persistent</a>           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; S &gt;&nbsp;</td>
          <td class="paramname"> <em>that</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a persistent handle for the same storage cell as the specified handle. This constructor allows you to pass persistent handles as arguments by value and to assign between persistent handles. However, attempting to assign between incompatible persistent handles, for instance from a Persistent&lt;String&gt; to a Persistent&lt;Number&gt; will cause a compiletime error. Assigning between compatible persistent handles, for instance assigning a Persistent&lt;String&gt; to a variable declared as Persistent&lt;Value&gt;, is allowed as <a class="el" href="classv8_1_1_string.html">String</a> is a subclass of <a class="el" href="classv8_1_1_value.html">Value</a>. 
<p>
This check fails when trying to convert between incompatible handles. For example, converting from a Handle&lt;String&gt; to a Handle&lt;Number&gt;.
</div>
</div><p>
<a class="anchor" name="6f3b0074b3b88e32d7a85637d17075ed"></a><!-- doxytag: member="v8::Persistent::Persistent" ref="6f3b0074b3b88e32d7a85637d17075ed" args="(Handle&lt; S &gt; that)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
<div class="memtemplate">
template&lt;class S &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::<a class="el" href="classv8_1_1_persistent.html">Persistent</a>           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1_handle.html">Handle</a>&lt; S &gt;&nbsp;</td>
          <td class="paramname"> <em>that</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
"Casts" a plain handle which is known to be a persistent handle to a persistent handle. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="30806c1125371c269a02ec03d47c69ab"></a><!-- doxytag: member="v8::Persistent::ClearWeak" ref="30806c1125371c269a02ec03d47c69ab" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::ClearWeak           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clears the weak reference to this object. 
</div>
</div><p>
<a class="anchor" name="33e53191844272ba0f2da4f55fc12297"></a><!-- doxytag: member="v8::Persistent::Dispose" ref="33e53191844272ba0f2da4f55fc12297" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::Dispose           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Releases the storage cell referenced by this persistent handle. Does not remove the reference to the cell from any handles. This handle's reference, and any any other references to the storage cell remain and IsEmpty will still return false. 
</div>
</div><p>
<a class="anchor" name="1f60b982c5e734df7e4fe22ccd5b62cf"></a><!-- doxytag: member="v8::Persistent::IsNearDeath" ref="1f60b982c5e734df7e4fe22ccd5b62cf" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::IsNearDeath           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the handle holds the only reference to an object. 
</div>
</div><p>
<a class="anchor" name="a636a55b81eee222f86866dd5ae8c06f"></a><!-- doxytag: member="v8::Persistent::IsWeak" ref="a636a55b81eee222f86866dd5ae8c06f" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::IsWeak           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns true if the handle's reference is weak. 
</div>
</div><p>
<a class="anchor" name="b04609812113450bece2640ad0b27658"></a><!-- doxytag: member="v8::Persistent::MakeWeak" ref="b04609812113450bece2640ad0b27658" args="(void *parameters, WeakReferenceCallback callback)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::MakeWeak           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8.html#9065f8994925d59dc82ae88667d93904">WeakReferenceCallback</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Make the reference to this object weak. When only weak handles refer to the object, the garbage collector will perform a callback to the given V8::WeakReferenceCallback function, passing it the object reference and the given parameters. 
</div>
</div><p>
<a class="anchor" name="d309269ccaeffa6dec338093752ca539"></a><!-- doxytag: member="v8::Persistent::New" ref="d309269ccaeffa6dec338093752ca539" args="(Handle&lt; T &gt; that)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1_persistent.html">Persistent</a>&lt; T &gt; <a class="el" href="classv8_1_1_persistent.html">v8::Persistent</a>&lt; T &gt;::New           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1_handle.html">Handle</a>&lt; T &gt;&nbsp;</td>
          <td class="paramname"> <em>that</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new persistent handle for an existing local or persistent handle. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>/home/riku/cornerstone/JS/v8-r4957/include/<a class="el" href="v8_8h-source.html">v8.h</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 28 13:06:50 2010 for v8 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
